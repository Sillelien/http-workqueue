queue:
  image: vizzbuzz/tutum-workqueue
  privileged: true
  volumes:
   - /var/run/docker.sock:/var/run/docker.sock:rw
  ports:
    - 8080:8080
  links:
    - worker:worker

worker:
  image: neilellis/rendercat-example

test:
  image: alpine
  command: bash -xec "a=$(curl http://${QUEUE_PORT_8080_TCP_ADDR}:${QUEUE_PORT_8080_TCP_PORT}/ping/1 | tr -d '\r') ; [[ $a == 'pong 1' ]]"
  links:
     - queue

